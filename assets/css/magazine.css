/* =========================
   Magazine: base layout
   ========================= */
.mag-wrap{display:grid;gap:1.6rem}

/* =========================
   Color tokens (LIGHT default)
   ========================= */
:root{
  --mag-bg: transparent;

  --mag-surface:#ffffff;
  --mag-surface-2:rgba(0,0,0,.03);

  --mag-text:rgba(0,0,0,.90);
  --mag-muted:rgba(0,0,0,.70);

  --mag-border:#e5e7eb;
  --mag-shadow:0 10px 30px rgba(0,0,0,.08);

  /* Buttons */
  --mag-btn-border:rgba(17,24,39,.9);
  --mag-btn-bg-hover:rgba(17,24,39,.95);
  --mag-btn-fg-hover:#ffffff;

  --mag-btn-secondary-border:#e5e7eb;
  --mag-btn-secondary-bg-hover:#f3f4f6;
  --mag-btn-secondary-fg-hover:#111827;

  /* Card overlay */
  --mag-overlay: linear-gradient(135deg,rgba(0,0,0,.02),rgba(0,0,0,.04));
}

/* =========================
   AUTO DARK (browser/OS preference)
   Applies ONLY when user did not force a theme via data-theme
   IMPORTANT: :root is <html>, so do NOT use "html ... :root" with a space.
   ========================= */
@media (prefers-color-scheme: dark){
  html:not([data-theme="light"]):not([data-theme="dark"]){
    --mag-surface:rgba(255,255,255,.06);
    --mag-surface-2:rgba(255,255,255,.08);

    --mag-text:rgba(255,255,255,.92);
    --mag-muted:rgba(255,255,255,.70);

    --mag-border:rgba(255,255,255,.14);
    --mag-shadow:0 10px 30px rgba(0,0,0,.35);

    --mag-btn-border:rgba(255,255,255,.55);
    --mag-btn-bg-hover:rgba(255,255,255,.14);
    --mag-btn-fg-hover:rgba(255,255,255,.95);

    --mag-btn-secondary-border:rgba(255,255,255,.22);
    --mag-btn-secondary-bg-hover:rgba(255,255,255,.10);
    --mag-btn-secondary-fg-hover:rgba(255,255,255,.95);

    --mag-overlay: linear-gradient(135deg,rgba(255,255,255,.06),rgba(255,255,255,.10));
  }
}

/* =========================
   MANUAL OVERRIDE (if present)
   These always win over prefers-color-scheme
   ========================= */
html[data-theme="dark"]{
  --mag-surface:rgba(255,255,255,.06);
  --mag-surface-2:rgba(255,255,255,.08);

  --mag-text:rgba(255,255,255,.92);
  --mag-muted:rgba(255,255,255,.70);

  --mag-border:rgba(255,255,255,.14);
  --mag-shadow:0 10px 30px rgba(0,0,0,.35);

  --mag-btn-border:rgba(255,255,255,.55);
  --mag-btn-bg-hover:rgba(255,255,255,.14);
  --mag-btn-fg-hover:rgba(255,255,255,.95);

  --mag-btn-secondary-border:rgba(255,255,255,.22);
  --mag-btn-secondary-bg-hover:rgba(255,255,255,.10);
  --mag-btn-secondary-fg-hover:rgba(255,255,255,.95);

  --mag-overlay: linear-gradient(135deg,rgba(255,255,255,.06),rgba(255,255,255,.10));
}

html[data-theme="light"]{
  /* explicit light (kept for clarity) */
  --mag-surface:#ffffff;
  --mag-surface-2:rgba(0,0,0,.03);
  --mag-text:rgba(0,0,0,.90);
  --mag-muted:rgba(0,0,0,.70);
  --mag-border:#e5e7eb;
  --mag-shadow:0 10px 30px rgba(0,0,0,.08);

  --mag-btn-border:rgba(17,24,39,.9);
  --mag-btn-bg-hover:rgba(17,24,39,.95);
  --mag-btn-fg-hover:#ffffff;

  --mag-btn-secondary-border:#e5e7eb;
  --mag-btn-secondary-bg-hover:#f3f4f6;
  --mag-btn-secondary-fg-hover:#111827;

  --mag-overlay: linear-gradient(135deg,rgba(0,0,0,.02),rgba(0,0,0,.04));
}

/* =========================
   Apply tokens
   ========================= */
.mag-wrap{color:var(--mag-text)}

/* HERO */
.mag-hero{
  display:grid;
  grid-template-columns:260px 1fr;
  gap:1.6rem;
  align-items:start;
  padding:1.2rem;
  border:1px solid var(--mag-border);
  border-radius:16px;
  background:var(--mag-surface);
  transition:all .25s ease;
}
.mag-hero:hover{box-shadow:0 12px 30px rgba(0,0,0,.08);transform:translateY(-3px)}
.mag-hero img{
  width:100%;
  border-radius:14px;
  border:1px solid var(--mag-border);
  transition:transform .3s ease
}
.mag-hero:hover img{transform:scale(1.02)}
.mag-actions{display:flex;gap:.6rem;flex-wrap:wrap;margin-top:.8rem}
.mag-hero .mag-kicker,
.mag-hero .mag-meta{color:var(--mag-muted)}

/* BUTTONS */
.mag-btn{
  display:inline-block;
  padding:.45rem .9rem;
  border:1px solid var(--mag-btn-border);
  border-radius:999px;
  text-decoration:none;
  font-size:.9rem;
  transition:all .2s ease;
  color:inherit;
  background:transparent;
}
.mag-btn:hover{background:var(--mag-btn-bg-hover);color:var(--mag-btn-fg-hover)}
.mag-btn.secondary{border-color:var(--mag-btn-secondary-border)}
.mag-btn.secondary:hover{
  background:var(--mag-btn-secondary-bg-hover);
  color:var(--mag-btn-secondary-fg-hover);
}

/* SECTIONS */
.mag-section{margin-top:1.6rem}

/* GRID + CARDS */
.mag-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:1rem}

.mag-card{
  padding:1rem;
  border:1px solid var(--mag-border);
  border-radius:16px;
  background:var(--mag-surface);
  transition:all .25s ease;
  position:relative;
  overflow:hidden;
  z-index:1;
  color:var(--mag-text);
}
.mag-card::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index:0;
  background:var(--mag-overlay);
  opacity:0;
  transition:opacity .25s ease;
}
.mag-card:hover{transform:translateY(-4px);box-shadow:0 12px 28px rgba(0,0,0,.08)}
.mag-card:hover::before{opacity:1}
.mag-card > *{position:relative;z-index:1}

.mag-card a{text-decoration:none;color:inherit}
.mag-card a:hover{text-decoration:underline}

.mag-kicker{
  font-size:.85rem;
  text-transform:uppercase;
  letter-spacing:.06em;
  margin:0 0 .4rem 0;
  color:var(--mag-muted);
}
.mag-title{margin:0}
.mag-meta{font-size:.9rem;margin-top:.35rem;color:var(--mag-muted)}
.mag-excerpt{margin-top:.6rem;font-size:.95rem;line-height:1.5;color:var(--mag-muted)}
.doi-badge{vertical-align:middle;margin-left:.4rem}

/* LISTS (Publications / Talks) */
.mag-list{
  margin:0;
  padding:0;
  list-style:none;
  border:1px solid var(--mag-border);
  border-radius:16px;
  background:var(--mag-surface);
  overflow:hidden;
  color:var(--mag-text);
}
.mag-list li{
  display:flex;
  gap:.8rem;
  align-items:baseline;
  padding:.75rem 1rem;
  border-top:1px solid var(--mag-border);
}
.mag-list li:first-child{border-top:none}
.mag-list li:hover{background:var(--mag-surface-2)}
.mag-list .mag-date{flex:0 0 auto;min-width:74px;font-size:.9rem;color:var(--mag-muted)}
.mag-list .mag-main{flex:1 1 auto}
.mag-list .mag-main a{text-decoration:none;color:inherit}
.mag-list .mag-main a:hover{text-decoration:underline}
.mag-list .mag-sub{font-size:.9rem;margin-top:.15rem;color:var(--mag-muted)}
.mag-list .mag-right{flex:0 0 auto;font-size:.85rem;color:var(--mag-muted)}

/* Responsive */
@media (max-width:720px){
  .mag-hero{grid-template-columns:1fr}
  .mag-grid{grid-template-columns:1fr}
}